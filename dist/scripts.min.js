function startTranscriptionService(a,b){$.get(a.transcript,function(b){function c(a){for(var b=0,c=0;c<h.length;c++){var d=h[c],e=d.elementid;d.start<=a?($("#"+e).removeClass("onmovecolor"),b=c):$("#"+e).removeClass("onmovecolor")}l=b}function d(a,b){a.animate({scrollTop:b.parent().scrollTop()+b.offset().top-b.parent().offset().top},{duration:500,specialEasing:{width:"linear",height:"easeOutBounce"},complete:function(a){}})}for(var e="",f=a.videoelementID,g=0;g<a.video.length;g++)ele=a.video[g],e+="<source src='"+ele.vi+"' type='"+ele.type+"'>";e+="Your browser does not support the video tag.",$("#"+f).html(e),$("#"+a.transcriptContainerID).html(b);var h=[],i=document.getElementById(f),j=$("#"+a.transcriptContainerID),k=0,l=0;$(i).on("timeupdate",function(a){a.stopPropagation();var b=parseInt(1e3*this.currentTime);k>b&&c(b),k=b;for(var e=!1,f=l;f<h.length;f++){var g=h[f];if(g.start<=b){if(f>0){var i=h[f-1];$("#"+i.elementid).removeClass("onmovecolor")}++l,e=!0}}if(e){var m=h[l-1].elementid;$("#"+m).addClass("onmovecolor"),d(j,$("#"+m)),e=!1}}),$("body").delegate(".normalcolor","click",function(){for(var a=$(this).attr("id"),b=0;b<h.length;b++){var d=h[b],e=d.elementid;if(a==e){i.currentTime=d.start/1e3,c(d.start);break}}}),i.onloadedmetadata=function(){i.play(),$("#"+a.transcriptContainerID+" p").each(function(a){var b=$(this).find("a").length,c=$(this).find("a")[0],d=$(this).find("a")[b-1];$(this).attr("id",a+"id"),$(this).addClass("normalcolor");var e=parseInt($(c).data("m")),f=parseInt($(d).data("m"));e==f&&(f=i.duration);var g={elementid:a+"id",start:e,end:f};h.push(g)})}}).success(function(){b()})}function onKeyDown(a){switch(a.keyCode){case 32:play?(myMedia.pause(),play=!1):(myMedia.play(),play=!0)}return!1}var play=!0,myMedia=document.getElementById("videoelement");window.addEventListener("keydown",onKeyDown,!1);